<h1 id="darkmode.js">Darkmode.js</h1>
<p><img
src="https://img.shields.io/github/license/mashape/apistatus.svg"
alt="GitHub" /> <a href="https://medium.com/@sandoche"><img
src="https://badgen.net/badge/icon/medium?icon=medium&amp;label"
alt="Medium Badge" /></a> <a href="https://twitter.com/sandochee"><img
src="https://img.shields.io/twitter/follow/sandochee.svg?style=social"
alt="Twitter: sandochee" /></a></p>
<p>üåì Add a Dark Mode / Night Mode to your website in a few seconds</p>
<p>This library uses the CSS <code>mix-blend-mode</code> to bring Dark
Mode to any of your websites. Just copy-paste the snippet and you will
get a widget to turn on and off the Dark Mode. You can also use it
without the widget programmatically. The plugin is lightweight, built-in
Vanilla. It also uses local storage by default, so your last setting
will be remembered!</p>
<p>I have been inspired by this article:
https://dev.wgao19.cc/2019-05-04__sun-moon-blending-mode/</p>
<h2 id="features">Features</h2>
<ul>
<li>Widget appears automatically</li>
<li>Saving users choice</li>
<li>Automatically shows Darkmode if the OS prefered theme is dark (if
the browsers support <code>prefers-color-scheme</code>)</li>
<li>Can be used programmatically without widget</li>
</ul>
<h2 id="demo">‚ú® Demo</h2>
<p>Check out the demo in these websites: - https://darkmodejs.learn.uno
- https://tradivegan.com (with custom label) - https://what.toeat.in
(with custom label) - https://www.kanbanote.com (without the widget,
once logged in) - https://www.sandoche.com (with custom label) -
https://pilab.dev (without the widget, with a custom toggle button)</p>
<h2 id="wordpress-plugins">Wordpress plugins</h2>
<p>If you are using Wordpress you may want to have a look at these
plugins based on Darkmode.js: -
https://wordpress.org/plugins/blackout-darkmode-widget/ -
https://wordpress.org/plugins/darkmode/</p>
<h2 id="how-to-use">üìñ How to use</h2>
<p>Darkmode.js is very easy to use, just copy-paste the following code
or use the npm package.</p>
<h3 id="easy-way-using-the-jsdelivr-cdn">üöÄ Easy way (using the JSDelivr
CDN)</h3>
<p>Just add this code to your HTML page:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">&quot;https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">addDarkmodeWidget</span>() {</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">Darkmode</span>()<span class="op">.</span><span class="fu">showWidget</span>()<span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="bu">window</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;load&#39;</span><span class="op">,</span> addDarkmodeWidget)<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span></code></pre></div>
<h3 id="using-npm">üì¶ Using NPM</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install darkmode-js</span></code></pre></div>
<p>Then add the following JavaScript code:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> Darkmode <span class="im">from</span> <span class="st">&#39;darkmode-js&#39;</span><span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">new</span> <span class="fu">Darkmode</span>()<span class="op">.</span><span class="fu">showWidget</span>()<span class="op">;</span></span></code></pre></div>
<h2 id="options">‚öôÔ∏è Options</h2>
<p>Here are the option availables:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> options <span class="op">=</span> {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">bottom</span><span class="op">:</span> <span class="st">&#39;64px&#39;</span><span class="op">,</span> <span class="co">// default: &#39;32px&#39;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">right</span><span class="op">:</span> <span class="st">&#39;unset&#39;</span><span class="op">,</span> <span class="co">// default: &#39;32px&#39;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">left</span><span class="op">:</span> <span class="st">&#39;32px&#39;</span><span class="op">,</span> <span class="co">// default: &#39;unset&#39;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">time</span><span class="op">:</span> <span class="st">&#39;0.5s&#39;</span><span class="op">,</span> <span class="co">// default: &#39;0.3s&#39;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">mixColor</span><span class="op">:</span> <span class="st">&#39;#fff&#39;</span><span class="op">,</span> <span class="co">// default: &#39;#fff&#39;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">backgroundColor</span><span class="op">:</span> <span class="st">&#39;#fff&#39;</span><span class="op">,</span>  <span class="co">// default: &#39;#fff&#39;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">buttonColorDark</span><span class="op">:</span> <span class="st">&#39;#100f2c&#39;</span><span class="op">,</span>  <span class="co">// default: &#39;#100f2c&#39;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">buttonColorLight</span><span class="op">:</span> <span class="st">&#39;#fff&#39;</span><span class="op">,</span> <span class="co">// default: &#39;#fff&#39;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">saveInCookies</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="co">// default: true,</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">&#39;üåì&#39;</span><span class="op">,</span> <span class="co">// default: &#39;&#39;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">autoMatchOsTheme</span><span class="op">:</span> <span class="kw">true</span> <span class="co">// default: true</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> darkmode <span class="op">=</span> <span class="kw">new</span> <span class="fu">Darkmode</span>(options)<span class="op">;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>darkmode<span class="op">.</span><span class="fu">showWidget</span>()<span class="op">;</span></span></code></pre></div>
<h2 id="methods">‚ñ∂Ô∏è Methods</h2>
<p>If you don't want to show the widget and enable/disable Darkmode
programatically you can use the method <code>toggle()</code>. You can
also check if the Dark Mode is activated with the method
<code>isActivated()</code>. See them in action in the following
example:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> darkmode <span class="op">=</span>  <span class="kw">new</span> <span class="fu">Darkmode</span>()<span class="op">;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>darkmode<span class="op">.</span><span class="fu">toggle</span>()<span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(darkmode<span class="op">.</span><span class="fu">isActivated</span>()) <span class="co">// will return true</span></span></code></pre></div>
<h2 id="override-style">Override style</h2>
<ul>
<li>A CSS class <code>darkmode--activated</code> is added to the body
tag when the darkmode is activated. You can take advantage of it to
override the style and have a custom style</li>
<li>Use the class <code>darkmode-ignore</code> where you don't want to
apply darkmode</li>
<li>You can also add this style: <code>isolation: isolate;</code> in
your CSS, this will also ignore the darkmode.</li>
<li>It is also possible to revert the Dark Mode with this style
<code>mix-blend-mode: difference;</code></li>
</ul>
<h3 id="examples">Examples</h3>
<div class="sourceCode" id="cb6"><pre
class="sourceCode css"><code class="sourceCode css"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.darkmode--activated</span> p<span class="op">,</span> <span class="fu">.darkmode--activated</span> li {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span><span class="ch">:</span> <span class="cn">#000</span><span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">.button</span> {</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">isolation</span><span class="ch">:</span> <span class="dv">isolate</span><span class="op">;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">.darkmode--activated</span> <span class="fu">.logo</span> {</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">mix-blend-mode</span><span class="ch">:</span> <span class="dv">difference</span><span class="op">;</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;darkmode-ignore&quot;</span><span class="dt">&gt;</span>üò¨<span class="dt">&lt;</span><span class="kw">span</span><span class="dt">&gt;</span></span></code></pre></div>
<h2 id="debug">Debug</h2>
<p>If it does not work you may have to add the following code, but this
will invalidate the classes to override.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode css"><code class="sourceCode css"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.darkmode-layer</span><span class="op">,</span> <span class="fu">.darkmode-toggle</span> {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">z-index</span><span class="ch">:</span> <span class="dv">500</span><span class="op">;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="browser-compatibility">Browser compatibility</h2>
<p>This library uses the CSS <code>mix-blend-mode: difference;</code> to
provide the Dark Mode. It may not be compatible with all the browsers.
Therefore the widget has been hidden in Internet Explorer and Edge. This
library also uses <code>prefers-color-scheme: dark</code> to
automatically enable the Dark Mode if the OS prefered theme is dark.</p>
<p>Check the compatibility here: -
https://caniuse.com/#search=mix-blend-mode -
https://caniuse.com/#search=prefers-color-scheme (to activate Dark Mode
automatically)</p>
<h2 id="development">Development</h2>
<ul>
<li><code>yarn build</code> or <code>npm run build</code> - produces a
production version of your library under the <code>lib</code>
folder</li>
<li><code>yarn dev</code> or <code>npm run dev</code> - produces
development version of your library and runs a watcher</li>
<li><code>yarn test</code> or <code>npm run test</code> - it runs the
tests :)</li>
<li><code>yarn test:watch</code> or <code>npm run test:watch</code> -
same as above but in a watch mode</li>
</ul>
<h2 id="show-your-support">‚≠êÔ∏è Show your support</h2>
<p>Please ‚≠êÔ∏è this repository if this project helped you!</p>
<p><a href="https://www.patreon.com/sandoche"><a
href="https://www.patreon.com/sandoche"><img
src="https://c5.patreon.com/external/logo/become_a_patron_button.png"
alt="patreon.png" /></a></a></p>
<h2 id="buy-me-a-beer">üç∫ Buy me a beer</h2>
<p>If you like this project, feel free to donate: * PayPal:
https://www.paypal.me/kanbanote * Bitcoin:
19JiNZ1LkMaz57tewqJaTg2hQWH4RgW4Yp * Ethereum:
0xded81fa4624e05339924355fe3504ba9587d5419 * Monero:
43jqzMquW2q989UKSrB2YbeffhmJhbYb2Yxu289bv7pLRh4xVgMKj5yTd52iL6x1dvCYs9ERg5biHYxMjGkpSTs6S2jMyJn
* Motive: MOTIV-25T5-SD65-V7LJ-BBWRD (Get Motive Now:
https://motive.network)</p>
